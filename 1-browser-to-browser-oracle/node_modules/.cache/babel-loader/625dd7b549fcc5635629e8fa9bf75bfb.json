{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DefaultSerializer = exports.extendSerializer = void 0;\n\nfunction extendSerializer(extend, implementation) {\n  const fallbackDeserializer = extend.deserialize.bind(extend);\n  const fallbackSerializer = extend.serialize.bind(extend);\n  return {\n    deserialize(message) {\n      return implementation.deserialize(message, fallbackDeserializer);\n    },\n\n    serialize(input) {\n      return implementation.serialize(input, fallbackSerializer);\n    }\n\n  };\n}\n\nexports.extendSerializer = extendSerializer;\nconst DefaultErrorSerializer = {\n  deserialize(message) {\n    return Object.assign(Error(message.message), {\n      name: message.name,\n      stack: message.stack\n    });\n  },\n\n  serialize(error) {\n    return {\n      __error_marker: \"$$error\",\n      message: error.message,\n      name: error.name,\n      stack: error.stack\n    };\n  }\n\n};\n\nconst isSerializedError = thing => thing && typeof thing === \"object\" && \"__error_marker\" in thing && thing.__error_marker === \"$$error\";\n\nexports.DefaultSerializer = {\n  deserialize(message) {\n    if (isSerializedError(message)) {\n      return DefaultErrorSerializer.deserialize(message);\n    } else {\n      return message;\n    }\n  },\n\n  serialize(input) {\n    if (input instanceof Error) {\n      return DefaultErrorSerializer.serialize(input);\n    } else {\n      return input;\n    }\n  }\n\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","DefaultSerializer","extendSerializer","extend","implementation","fallbackDeserializer","deserialize","bind","fallbackSerializer","serialize","message","input","DefaultErrorSerializer","assign","Error","name","stack","error","__error_marker","isSerializedError","thing"],"sources":["/Users/mgrok/Projects/fluence-projects/examples/quickstart/1-browser-to-browser/node_modules/threads/dist/serializers.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultSerializer = exports.extendSerializer = void 0;\nfunction extendSerializer(extend, implementation) {\n    const fallbackDeserializer = extend.deserialize.bind(extend);\n    const fallbackSerializer = extend.serialize.bind(extend);\n    return {\n        deserialize(message) {\n            return implementation.deserialize(message, fallbackDeserializer);\n        },\n        serialize(input) {\n            return implementation.serialize(input, fallbackSerializer);\n        }\n    };\n}\nexports.extendSerializer = extendSerializer;\nconst DefaultErrorSerializer = {\n    deserialize(message) {\n        return Object.assign(Error(message.message), {\n            name: message.name,\n            stack: message.stack\n        });\n    },\n    serialize(error) {\n        return {\n            __error_marker: \"$$error\",\n            message: error.message,\n            name: error.name,\n            stack: error.stack\n        };\n    }\n};\nconst isSerializedError = (thing) => thing && typeof thing === \"object\" && \"__error_marker\" in thing && thing.__error_marker === \"$$error\";\nexports.DefaultSerializer = {\n    deserialize(message) {\n        if (isSerializedError(message)) {\n            return DefaultErrorSerializer.deserialize(message);\n        }\n        else {\n            return message;\n        }\n    },\n    serialize(input) {\n        if (input instanceof Error) {\n            return DefaultErrorSerializer.serialize(input);\n        }\n        else {\n            return input;\n        }\n    }\n};\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,iBAAR,GAA4BF,OAAO,CAACG,gBAAR,GAA2B,KAAK,CAA5D;;AACA,SAASA,gBAAT,CAA0BC,MAA1B,EAAkCC,cAAlC,EAAkD;EAC9C,MAAMC,oBAAoB,GAAGF,MAAM,CAACG,WAAP,CAAmBC,IAAnB,CAAwBJ,MAAxB,CAA7B;EACA,MAAMK,kBAAkB,GAAGL,MAAM,CAACM,SAAP,CAAiBF,IAAjB,CAAsBJ,MAAtB,CAA3B;EACA,OAAO;IACHG,WAAW,CAACI,OAAD,EAAU;MACjB,OAAON,cAAc,CAACE,WAAf,CAA2BI,OAA3B,EAAoCL,oBAApC,CAAP;IACH,CAHE;;IAIHI,SAAS,CAACE,KAAD,EAAQ;MACb,OAAOP,cAAc,CAACK,SAAf,CAAyBE,KAAzB,EAAgCH,kBAAhC,CAAP;IACH;;EANE,CAAP;AAQH;;AACDT,OAAO,CAACG,gBAAR,GAA2BA,gBAA3B;AACA,MAAMU,sBAAsB,GAAG;EAC3BN,WAAW,CAACI,OAAD,EAAU;IACjB,OAAOb,MAAM,CAACgB,MAAP,CAAcC,KAAK,CAACJ,OAAO,CAACA,OAAT,CAAnB,EAAsC;MACzCK,IAAI,EAAEL,OAAO,CAACK,IAD2B;MAEzCC,KAAK,EAAEN,OAAO,CAACM;IAF0B,CAAtC,CAAP;EAIH,CAN0B;;EAO3BP,SAAS,CAACQ,KAAD,EAAQ;IACb,OAAO;MACHC,cAAc,EAAE,SADb;MAEHR,OAAO,EAAEO,KAAK,CAACP,OAFZ;MAGHK,IAAI,EAAEE,KAAK,CAACF,IAHT;MAIHC,KAAK,EAAEC,KAAK,CAACD;IAJV,CAAP;EAMH;;AAd0B,CAA/B;;AAgBA,MAAMG,iBAAiB,GAAIC,KAAD,IAAWA,KAAK,IAAI,OAAOA,KAAP,KAAiB,QAA1B,IAAsC,oBAAoBA,KAA1D,IAAmEA,KAAK,CAACF,cAAN,KAAyB,SAAjI;;AACAnB,OAAO,CAACE,iBAAR,GAA4B;EACxBK,WAAW,CAACI,OAAD,EAAU;IACjB,IAAIS,iBAAiB,CAACT,OAAD,CAArB,EAAgC;MAC5B,OAAOE,sBAAsB,CAACN,WAAvB,CAAmCI,OAAnC,CAAP;IACH,CAFD,MAGK;MACD,OAAOA,OAAP;IACH;EACJ,CARuB;;EASxBD,SAAS,CAACE,KAAD,EAAQ;IACb,IAAIA,KAAK,YAAYG,KAArB,EAA4B;MACxB,OAAOF,sBAAsB,CAACH,SAAvB,CAAiCE,KAAjC,CAAP;IACH,CAFD,MAGK;MACD,OAAOA,KAAP;IACH;EACJ;;AAhBuB,CAA5B"},"metadata":{},"sourceType":"script"}