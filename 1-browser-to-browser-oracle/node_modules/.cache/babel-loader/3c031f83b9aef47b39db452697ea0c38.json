{"ast":null,"code":"'use strict';\n\nconst drain = require('it-drain');\n/**\n * @typedef {import('peer-id')} PeerId\n * @typedef {import('libp2p-interfaces/src/content-routing/types').ContentRouting} ContentRoutingModule\n * @typedef {import('multiformats/cid').CID} CID\n */\n\n/**\n * Wrapper class to convert events into returned values\n *\n * @implements {ContentRoutingModule}\n */\n\n\nclass DHTContentRouting {\n  /**\n   * @param {import('libp2p-kad-dht').DHT} dht\n   */\n  constructor(dht) {\n    this._dht = dht;\n  }\n  /**\n   * @param {CID} cid\n   */\n\n\n  async provide(cid) {\n    await drain(this._dht.provide(cid));\n  }\n  /**\n   * @param {CID} cid\n   * @param {*} options\n   */\n\n\n  async *findProviders(cid, options) {\n    for await (const event of this._dht.findProviders(cid, options)) {\n      if (event.name === 'PROVIDER') {\n        yield* event.providers;\n      }\n    }\n  }\n\n}\n\nmodule.exports = {\n  DHTContentRouting\n};","map":{"version":3,"names":["drain","require","DHTContentRouting","constructor","dht","_dht","provide","cid","findProviders","options","event","name","providers","module","exports"],"sources":["/Users/mgrok/Projects/fluence-projects/examples/quickstart/1-browser-to-browser/node_modules/libp2p/src/dht/dht-content-routing.js"],"sourcesContent":["'use strict'\n\nconst drain = require('it-drain')\n\n/**\n * @typedef {import('peer-id')} PeerId\n * @typedef {import('libp2p-interfaces/src/content-routing/types').ContentRouting} ContentRoutingModule\n * @typedef {import('multiformats/cid').CID} CID\n */\n\n/**\n * Wrapper class to convert events into returned values\n *\n * @implements {ContentRoutingModule}\n */\nclass DHTContentRouting {\n  /**\n   * @param {import('libp2p-kad-dht').DHT} dht\n   */\n  constructor (dht) {\n    this._dht = dht\n  }\n\n  /**\n   * @param {CID} cid\n   */\n  async provide (cid) {\n    await drain(this._dht.provide(cid))\n  }\n\n  /**\n   * @param {CID} cid\n   * @param {*} options\n   */\n  async * findProviders (cid, options) {\n    for await (const event of this._dht.findProviders(cid, options)) {\n      if (event.name === 'PROVIDER') {\n        yield * event.providers\n      }\n    }\n  }\n}\n\nmodule.exports = { DHTContentRouting }\n"],"mappings":"AAAA;;AAEA,MAAMA,KAAK,GAAGC,OAAO,CAAC,UAAD,CAArB;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AACA,MAAMC,iBAAN,CAAwB;EACtB;AACF;AACA;EACEC,WAAW,CAAEC,GAAF,EAAO;IAChB,KAAKC,IAAL,GAAYD,GAAZ;EACD;EAED;AACF;AACA;;;EACe,MAAPE,OAAO,CAAEC,GAAF,EAAO;IAClB,MAAMP,KAAK,CAAC,KAAKK,IAAL,CAAUC,OAAV,CAAkBC,GAAlB,CAAD,CAAX;EACD;EAED;AACF;AACA;AACA;;;EACuB,OAAbC,aAAa,CAAED,GAAF,EAAOE,OAAP,EAAgB;IACnC,WAAW,MAAMC,KAAjB,IAA0B,KAAKL,IAAL,CAAUG,aAAV,CAAwBD,GAAxB,EAA6BE,OAA7B,CAA1B,EAAiE;MAC/D,IAAIC,KAAK,CAACC,IAAN,KAAe,UAAnB,EAA+B;QAC7B,OAAQD,KAAK,CAACE,SAAd;MACD;IACF;EACF;;AAzBqB;;AA4BxBC,MAAM,CAACC,OAAP,GAAiB;EAAEZ;AAAF,CAAjB"},"metadata":{},"sourceType":"script"}