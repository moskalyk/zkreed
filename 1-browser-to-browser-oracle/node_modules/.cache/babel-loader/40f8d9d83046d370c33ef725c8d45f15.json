{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createPromiseWithResolver = void 0;\n\nconst doNothing = () => undefined;\n/**\n * Creates a new promise and exposes its resolver function.\n * Use with care!\n */\n\n\nfunction createPromiseWithResolver() {\n  let alreadyResolved = false;\n  let resolvedTo;\n  let resolver = doNothing;\n  const promise = new Promise(resolve => {\n    if (alreadyResolved) {\n      resolve(resolvedTo);\n    } else {\n      resolver = resolve;\n    }\n  });\n\n  const exposedResolver = value => {\n    alreadyResolved = true;\n    resolvedTo = value;\n    resolver(resolvedTo);\n  };\n\n  return [promise, exposedResolver];\n}\n\nexports.createPromiseWithResolver = createPromiseWithResolver;","map":{"version":3,"names":["Object","defineProperty","exports","value","createPromiseWithResolver","doNothing","undefined","alreadyResolved","resolvedTo","resolver","promise","Promise","resolve","exposedResolver"],"sources":["/Users/mgrok/Projects/fluence-projects/examples/quickstart/1-browser-to-browser/node_modules/threads/dist/promise.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createPromiseWithResolver = void 0;\nconst doNothing = () => undefined;\n/**\n * Creates a new promise and exposes its resolver function.\n * Use with care!\n */\nfunction createPromiseWithResolver() {\n    let alreadyResolved = false;\n    let resolvedTo;\n    let resolver = doNothing;\n    const promise = new Promise(resolve => {\n        if (alreadyResolved) {\n            resolve(resolvedTo);\n        }\n        else {\n            resolver = resolve;\n        }\n    });\n    const exposedResolver = (value) => {\n        alreadyResolved = true;\n        resolvedTo = value;\n        resolver(resolvedTo);\n    };\n    return [promise, exposedResolver];\n}\nexports.createPromiseWithResolver = createPromiseWithResolver;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,yBAAR,GAAoC,KAAK,CAAzC;;AACA,MAAMC,SAAS,GAAG,MAAMC,SAAxB;AACA;AACA;AACA;AACA;;;AACA,SAASF,yBAAT,GAAqC;EACjC,IAAIG,eAAe,GAAG,KAAtB;EACA,IAAIC,UAAJ;EACA,IAAIC,QAAQ,GAAGJ,SAAf;EACA,MAAMK,OAAO,GAAG,IAAIC,OAAJ,CAAYC,OAAO,IAAI;IACnC,IAAIL,eAAJ,EAAqB;MACjBK,OAAO,CAACJ,UAAD,CAAP;IACH,CAFD,MAGK;MACDC,QAAQ,GAAGG,OAAX;IACH;EACJ,CAPe,CAAhB;;EAQA,MAAMC,eAAe,GAAIV,KAAD,IAAW;IAC/BI,eAAe,GAAG,IAAlB;IACAC,UAAU,GAAGL,KAAb;IACAM,QAAQ,CAACD,UAAD,CAAR;EACH,CAJD;;EAKA,OAAO,CAACE,OAAD,EAAUG,eAAV,CAAP;AACH;;AACDX,OAAO,CAACE,yBAAR,GAAoCA,yBAApC"},"metadata":{},"sourceType":"script"}